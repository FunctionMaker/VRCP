<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.carfi.vrcp.dao.sondao.OrgPermissionDao">

	<resultMap type="OrgPermission" id="BaseResultMap">
		<id column="id" property="id"/>
		<result column="name" property="name"/>
		<result column="org_id" property="orgId"/>
	</resultMap>
	
	<!-- 查询组织下的权限列表 -->
	<select id="queryByOrgId" resultMap="BaseResultMap" parameterType="Long">
		SELECT ID,NAME,ORG_ID 
		FROM T_ORG_PERMISSION
		WHERE ORG_ID = #{ID}
	</select>
	
	<!-- 根据角色id查询权限列表 -->
	<select id="queryByRoleId" parameterType="Long" resultMap="BaseResultMap">
		SELECT P.ID,P.NAME,P.ORG_ID 
		FROM T_ORG_PERMISSION P
		INNER JOIN T_ORGROLE_ORGPERMISSION  RP
		ON RP.ORG_PERMISSION_ID = P.ID
		AND RP.ORG_ROLE_ID = #{roleId}
	</select>
	<!-- 根据角色id查询权限列表 ,只查询id-->
	<select id="queryPermissionIdByRoleId" parameterType="Long" resultType="java.lang.Long">
		SELECT DISTINCT P.ID
		FROM T_ORG_PERMISSION P
		INNER JOIN T_ORGROLE_ORGPERMISSION  RP
		ON RP.ORG_PERMISSION_ID = P.ID
		AND RP.ORG_ROLE_ID = #{roleId}
	</select>
</mapper>